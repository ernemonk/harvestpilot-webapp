import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from "react/jsx-runtime";
/**
 * Device Dashboard - Main hardware monitoring and control page
 *
 * Integrates with Raspberry Pi via Firestore for real-time updates.
 * - View sensor readings (temperature, humidity, soil moisture, water level)
 * - Control pump and lights manually
 * - Monitor automation status
 * - View analytics and historical data
 * - Configure crop settings
 */
import { useState } from 'react';
import { useAuth } from '../contexts/AuthContext';
import { useDeviceState, isDeviceOnline } from '../hooks/useDeviceState';
import { useHourlyHistory, formatChartData } from '../hooks/useHourlyHistory';
import { useAlerts } from '../hooks/useAlerts';
import { useCommands } from '../hooks/useCommands';
import { HealthCard } from '../components/dashboard/HealthCard';
import { SensorGauges } from '../components/dashboard/SensorGauges';
import { ScheduleCard } from '../components/dashboard/ScheduleCard';
import { ControlPanel } from '../components/dashboard/ControlPanel';
import { AlertBanner } from '../components/alerts/AlertBanner';
import { NavLink } from 'react-router-dom';
import NoOrganization from '../components/ui/NoOrganization';
// Simple line chart component for analytics
function SimpleChart({ data, title }) {
    if (data.length === 0) {
        return (_jsx("div", { className: "h-48 flex items-center justify-center text-gray-400", children: "No data available yet" }));
    }
    const maxTemp = Math.max(...data.map(d => d.temperature));
    const minTemp = Math.min(...data.map(d => d.temperature));
    const maxHum = Math.max(...data.map(d => d.humidity));
    const minHum = Math.min(...data.map(d => d.humidity));
    const tempRange = maxTemp - minTemp || 1;
    const humRange = maxHum - minHum || 1;
    return (_jsxs("div", { className: "h-64", children: [_jsxs("div", { className: "flex justify-between text-xs text-gray-500 mb-2", children: [_jsx("span", { children: "Temperature (\u00B0F)" }), _jsx("span", { children: "Humidity (%)" })] }), _jsxs("div", { className: "relative h-48 bg-gray-50 rounded-lg p-4", children: [_jsxs("div", { className: "absolute left-0 top-0 bottom-0 w-10 flex flex-col justify-between text-xs text-orange-600", children: [_jsxs("span", { children: [Math.round(maxTemp), "\u00B0"] }), _jsxs("span", { children: [Math.round(minTemp), "\u00B0"] })] }), _jsxs("div", { className: "absolute right-0 top-0 bottom-0 w-10 flex flex-col justify-between text-xs text-blue-600 text-right", children: [_jsxs("span", { children: [Math.round(maxHum), "%"] }), _jsxs("span", { children: [Math.round(minHum), "%"] })] }), _jsxs("svg", { className: "w-full h-full ml-10 mr-10", style: { width: 'calc(100% - 80px)' }, viewBox: `0 0 ${data.length * 20} 100`, preserveAspectRatio: "none", children: [_jsx("polyline", { fill: "none", stroke: "#f97316", strokeWidth: "2", points: data.map((d, i) => `${i * 20},${100 - ((d.temperature - minTemp) / tempRange) * 100}`).join(' ') }), _jsx("polyline", { fill: "none", stroke: "#3b82f6", strokeWidth: "2", strokeDasharray: "4,2", points: data.map((d, i) => `${i * 20},${100 - ((d.humidity - minHum) / humRange) * 100}`).join(' ') })] }), _jsxs("div", { className: "flex justify-between text-xs text-gray-400 mt-2 ml-10 mr-10", children: [_jsx("span", { children: data[0]?.time }), _jsx("span", { children: data[Math.floor(data.length / 2)]?.time || '' }), _jsx("span", { children: data[data.length - 1]?.time })] })] }), _jsxs("div", { className: "flex justify-center gap-6 mt-2 text-xs", children: [_jsxs("span", { className: "flex items-center gap-1", children: [_jsx("span", { className: "w-3 h-0.5 bg-orange-500" }), " Temperature"] }), _jsxs("span", { className: "flex items-center gap-1", children: [_jsx("span", { className: "w-3 h-0.5 bg-blue-500", style: { borderTop: '2px dashed' } }), " Humidity"] })] })] }));
}
// Device info card showing hardware details
function DeviceInfoCard({ state }) {
    return (_jsxs("div", { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4", children: [_jsx("h3", { className: "text-sm font-medium text-gray-500 uppercase tracking-wide mb-4", children: "\uD83D\uDD27 Hardware Info" }), _jsxs("div", { className: "grid grid-cols-2 gap-4 text-sm", children: [_jsxs("div", { children: [_jsx("span", { className: "text-gray-500", children: "Device ID:" }), _jsx("p", { className: "font-mono text-gray-800 truncate", children: state.deviceId })] }), _jsxs("div", { children: [_jsx("span", { className: "text-gray-500", children: "Firmware:" }), _jsx("p", { className: "text-gray-800", children: state.firmwareVersion || 'Unknown' })] }), _jsxs("div", { children: [_jsx("span", { className: "text-gray-500", children: "Last Sync:" }), _jsx("p", { className: "text-gray-800", children: state.lastSyncAt
                                    ? new Date(state.lastSyncAt).toLocaleString()
                                    : 'Never' })] }), _jsxs("div", { children: [_jsx("span", { className: "text-gray-500", children: "Status:" }), _jsx("p", { className: `font-medium ${isDeviceOnline(state) ? 'text-green-600' : 'text-red-600'}`, children: isDeviceOnline(state) ? 'ðŸŸ¢ Online' : 'ðŸ”´ Offline' })] })] })] }));
}
// Crop configuration display and editor
function CropConfigCard({ cropConfig, deviceId }) {
    const [isEditing, setIsEditing] = useState(false);
    const [config, setConfig] = useState(cropConfig);
    const commands = useCommands(deviceId);
    const handleSave = async () => {
        try {
            await commands.sendCommand('update_crop_config', config);
            setIsEditing(false);
        }
        catch (err) {
            console.error('Failed to update crop config:', err);
        }
    };
    if (!cropConfig) {
        return (_jsxs("div", { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4", children: [_jsx("h3", { className: "text-sm font-medium text-gray-500 uppercase tracking-wide mb-4", children: "\uD83C\uDF31 Crop Configuration" }), _jsxs("div", { className: "text-center py-6", children: [_jsx("p", { className: "text-gray-500 mb-4", children: "No crop configured yet" }), _jsx(NavLink, { to: "/device/setup", className: "px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600", children: "Configure Crop" })] })] }));
    }
    return (_jsxs("div", { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-4", children: [_jsx("h3", { className: "text-sm font-medium text-gray-500 uppercase tracking-wide", children: "\uD83C\uDF31 Crop Configuration" }), _jsx("button", { onClick: () => setIsEditing(!isEditing), className: "text-sm text-primary-600 hover:text-primary-700", children: isEditing ? 'Cancel' : 'Edit' })] }), isEditing ? (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-2 gap-4", children: [_jsxs("div", { children: [_jsx("label", { className: "block text-xs text-gray-500 mb-1", children: "Crop Type" }), _jsx("input", { type: "text", value: config.cropType, onChange: (e) => setConfig({ ...config, cropType: e.target.value }), className: "w-full border rounded px-2 py-1 text-sm" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-xs text-gray-500 mb-1", children: "Expected Harvest Days" }), _jsx("input", { type: "number", value: config.expectedHarvestDays, onChange: (e) => setConfig({ ...config, expectedHarvestDays: parseInt(e.target.value) }), className: "w-full border rounded px-2 py-1 text-sm" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-xs text-gray-500 mb-1", children: "Light On Hour (0-23)" }), _jsx("input", { type: "number", value: config.lightOnHour, onChange: (e) => setConfig({ ...config, lightOnHour: parseInt(e.target.value) }), className: "w-full border rounded px-2 py-1 text-sm", min: "0", max: "23" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-xs text-gray-500 mb-1", children: "Light Off Hour (0-23)" }), _jsx("input", { type: "number", value: config.lightOffHour, onChange: (e) => setConfig({ ...config, lightOffHour: parseInt(e.target.value) }), className: "w-full border rounded px-2 py-1 text-sm", min: "0", max: "23" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-xs text-gray-500 mb-1", children: "Irrigation Interval (hours)" }), _jsx("input", { type: "number", value: config.irrigationIntervalHours, onChange: (e) => setConfig({ ...config, irrigationIntervalHours: parseInt(e.target.value) }), className: "w-full border rounded px-2 py-1 text-sm" })] }), _jsxs("div", { children: [_jsx("label", { className: "block text-xs text-gray-500 mb-1", children: "Irrigation Duration (seconds)" }), _jsx("input", { type: "number", value: config.irrigationDurationSeconds, onChange: (e) => setConfig({ ...config, irrigationDurationSeconds: parseInt(e.target.value) }), className: "w-full border rounded px-2 py-1 text-sm" })] })] }), _jsx("button", { onClick: handleSave, disabled: commands.sending, className: "w-full py-2 bg-primary-500 text-white rounded hover:bg-primary-600 disabled:opacity-50", children: commands.sending ? 'Saving...' : 'Save Configuration' })] })) : (_jsxs("div", { className: "space-y-3", children: [_jsxs("div", { className: "flex justify-between items-center py-2 border-b", children: [_jsx("span", { className: "text-gray-600", children: "Crop Type" }), _jsx("span", { className: "font-medium", children: cropConfig.cropType.replace(/_/g, ' ') })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b", children: [_jsx("span", { className: "text-gray-600", children: "Planted" }), _jsx("span", { className: "font-medium", children: new Date(cropConfig.plantedAt).toLocaleDateString() })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b", children: [_jsx("span", { className: "text-gray-600", children: "Est. Harvest" }), _jsxs("span", { className: "font-medium", children: [new Date(cropConfig.plantedAt + cropConfig.expectedHarvestDays * 86400000).toLocaleDateString(), _jsxs("span", { className: "text-gray-400 ml-1", children: ["(", cropConfig.expectedHarvestDays, " days)"] })] })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b", children: [_jsx("span", { className: "text-gray-600", children: "Light Schedule" }), _jsxs("span", { className: "font-medium", children: [cropConfig.lightOnHour, ":00 - ", cropConfig.lightOffHour, ":00"] })] }), _jsxs("div", { className: "flex justify-between items-center py-2 border-b", children: [_jsx("span", { className: "text-gray-600", children: "Irrigation" }), _jsxs("span", { className: "font-medium", children: ["Every ", cropConfig.irrigationIntervalHours, "h for ", cropConfig.irrigationDurationSeconds, "s"] })] }), _jsxs("div", { className: "flex justify-between items-center py-2", children: [_jsx("span", { className: "text-gray-600", children: "Target Temp" }), _jsxs("span", { className: "font-medium", children: [cropConfig.tempTargetMin, "\u00B0F - ", cropConfig.tempTargetMax, "\u00B0F"] })] })] }))] }));
}
export default function Device() {
    const { currentUser, currentOrganization, loading: authLoading } = useAuth();
    // Get deviceId from user profile (set during device registration)
    const deviceId = currentUser?.deviceId || localStorage.getItem('harvestpilot_device_id');
    const { state, loading: stateLoading, error: stateError } = useDeviceState(deviceId);
    const { data: history, loading: historyLoading } = useHourlyHistory(deviceId, 24);
    const { criticalAlert, activeAlerts } = useAlerts(deviceId);
    const [activeTab, setActiveTab] = useState('overview');
    // Show loading while checking organization
    if (authLoading) {
        return (_jsx("div", { className: "flex items-center justify-center min-h-[60vh]", children: _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4" }), _jsx("p", { className: "text-gray-600", children: "Loading..." })] }) }));
    }
    // Show NoOrganization if user doesn't have an organization
    if (!currentOrganization) {
        return _jsx(NoOrganization, {});
    }
    // No device registered
    if (!deviceId) {
        return (_jsx("div", { className: "max-w-2xl mx-auto py-12", children: _jsxs("div", { className: "bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center", children: [_jsx("div", { className: "text-6xl mb-4", children: "\uD83C\uDF31" }), _jsx("h1", { className: "text-2xl font-bold text-gray-900 mb-2", children: "No Device Connected" }), _jsx("p", { className: "text-gray-600 mb-6", children: "Set up your HarvestPilot device to start monitoring your grow operation." }), _jsx(NavLink, { to: "/device/setup", className: "inline-block px-6 py-3 bg-primary-500 text-white rounded-lg hover:bg-primary-600 font-medium", children: "Set Up Device" }), _jsxs("div", { className: "mt-8 pt-8 border-t text-left", children: [_jsx("h3", { className: "font-medium text-gray-900 mb-4", children: "What you'll need:" }), _jsxs("ul", { className: "space-y-2 text-sm text-gray-600", children: [_jsxs("li", { className: "flex items-start gap-2", children: [_jsx("span", { className: "text-primary-500", children: "\u2713" }), _jsx("span", { children: "Raspberry Pi with HarvestPilot software installed" })] }), _jsxs("li", { className: "flex items-start gap-2", children: [_jsx("span", { className: "text-primary-500", children: "\u2713" }), _jsx("span", { children: "DHT22 sensor for temperature/humidity" })] }), _jsxs("li", { className: "flex items-start gap-2", children: [_jsx("span", { className: "text-primary-500", children: "\u2713" }), _jsx("span", { children: "Soil moisture sensor" })] }), _jsxs("li", { className: "flex items-start gap-2", children: [_jsx("span", { className: "text-primary-500", children: "\u2713" }), _jsx("span", { children: "Water pump with relay module" })] }), _jsxs("li", { className: "flex items-start gap-2", children: [_jsx("span", { className: "text-primary-500", children: "\u2713" }), _jsx("span", { children: "LED grow lights (optional)" })] })] })] })] }) }));
    }
    if (stateLoading) {
        return (_jsx("div", { className: "flex items-center justify-center min-h-[60vh]", children: _jsxs("div", { className: "text-center", children: [_jsx("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4" }), _jsx("p", { className: "text-gray-600", children: "Connecting to device..." })] }) }));
    }
    if (stateError) {
        return (_jsx("div", { className: "flex items-center justify-center min-h-[60vh]", children: _jsxs("div", { className: "text-center max-w-md", children: [_jsx("div", { className: "text-5xl mb-4", children: "\u26A0\uFE0F" }), _jsx("h2", { className: "text-xl font-bold text-red-600 mb-2", children: "Connection Error" }), _jsx("p", { className: "text-gray-600 mb-4", children: stateError.message }), _jsx("button", { onClick: () => window.location.reload(), className: "px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600", children: "Retry Connection" })] }) }));
    }
    if (!state) {
        return (_jsx("div", { className: "flex items-center justify-center min-h-[60vh]", children: _jsxs("div", { className: "text-center max-w-md", children: [_jsx("div", { className: "text-5xl mb-4", children: "\uD83D\uDCE1" }), _jsx("h2", { className: "text-xl font-bold text-gray-800 mb-2", children: "Device Not Found" }), _jsx("p", { className: "text-gray-600 mb-4", children: "Your device hasn't synced yet. Make sure your Raspberry Pi is running and connected to the internet." }), _jsx(NavLink, { to: "/device/setup", className: "inline-block px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600", children: "Troubleshoot Setup" })] }) }));
    }
    const chartData = formatChartData(history);
    return (_jsxs("div", { className: "min-h-screen bg-gray-50", children: [criticalAlert && (_jsx(AlertBanner, { alert: criticalAlert, onViewDetails: () => window.location.href = '/alerts' })), _jsxs("div", { className: "max-w-6xl mx-auto p-4 space-y-4", children: [_jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { children: [_jsx("h1", { className: "text-2xl font-bold text-gray-900", children: "Device Dashboard" }), _jsx("p", { className: "text-sm text-gray-500", children: state.cropConfig?.cropType
                                            ? `Growing ${state.cropConfig.cropType.replace(/_/g, ' ')}`
                                            : 'No crop configured' })] }), _jsxs("div", { className: "flex items-center gap-3", children: [activeAlerts.length > 0 && (_jsxs(NavLink, { to: "/alerts", className: "px-3 py-1 bg-amber-100 text-amber-700 rounded-full text-sm hover:bg-amber-200", children: [activeAlerts.length, " alert", activeAlerts.length !== 1 ? 's' : ''] })), _jsx("span", { className: `px-3 py-1 rounded-full text-sm ${isDeviceOnline(state)
                                            ? 'bg-green-100 text-green-700'
                                            : 'bg-red-100 text-red-700'}`, children: isDeviceOnline(state) ? 'ðŸŸ¢ Online' : 'ðŸ”´ Offline' })] })] }), _jsx("div", { className: "border-b border-gray-200", children: _jsx("nav", { className: "flex gap-4", children: ['overview', 'analytics', 'settings'].map((tab) => (_jsxs("button", { onClick: () => setActiveTab(tab), className: `py-2 px-1 border-b-2 text-sm font-medium capitalize ${activeTab === tab
                                    ? 'border-primary-500 text-primary-600'
                                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'}`, children: [tab === 'overview' && 'ðŸ“Š ', tab === 'analytics' && 'ðŸ“ˆ ', tab === 'settings' && 'âš™ï¸ ', tab] }, tab))) }) }), activeTab === 'overview' && (_jsxs("div", { className: "space-y-4", children: [_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsx(HealthCard, { status: isDeviceOnline(state) ? 'online' : 'offline', autopilotMode: state.autopilotMode, lastHeartbeat: state.lastHeartbeat, failsafeTriggered: state.failsafeTriggered, failsafeReason: state.failsafeReason }), _jsx(SensorGauges, { currentReading: state.currentReading, cropConfig: state.cropConfig })] }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsx(ScheduleCard, { lastIrrigationAt: state.lastIrrigationAt, nextIrrigationAt: state.nextIrrigationAt, irrigationIntervalHours: state.cropConfig?.irrigationIntervalHours || 4 }), _jsx(ControlPanel, { deviceId: deviceId, autopilotMode: state.autopilotMode, lightsOn: state.lightsOn, failsafeTriggered: state.failsafeTriggered, waterLevel: state.currentReading?.waterLevel || 0 })] }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4", children: [_jsxs("div", { className: "flex items-center justify-between mb-3", children: [_jsx("h3", { className: "text-sm font-medium text-gray-500 uppercase tracking-wide", children: "Last 24 Hours" }), _jsx("button", { onClick: () => setActiveTab('analytics'), className: "text-sm text-primary-600 hover:text-primary-700", children: "View Full Analytics \u2192" })] }), historyLoading ? (_jsx("div", { className: "h-32 flex items-center justify-center text-gray-400", children: "Loading chart data..." })) : (_jsx(SimpleChart, { data: chartData, title: "Temperature & Humidity" }))] })] })), activeTab === 'analytics' && (_jsxs("div", { className: "space-y-4", children: [_jsx("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: history.length > 0 ? (_jsxs(_Fragment, { children: [_jsxs("div", { className: "bg-white rounded-lg shadow-sm border p-4 text-center", children: [_jsx("p", { className: "text-sm text-gray-500", children: "Avg Temperature" }), _jsxs("p", { className: "text-2xl font-bold text-orange-600", children: [Math.round(history.reduce((acc, h) => acc + h.tempAvg, 0) / history.length), "\u00B0F"] })] }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm border p-4 text-center", children: [_jsx("p", { className: "text-sm text-gray-500", children: "Avg Humidity" }), _jsxs("p", { className: "text-2xl font-bold text-blue-600", children: [Math.round(history.reduce((acc, h) => acc + h.humidityAvg, 0) / history.length), "%"] })] }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm border p-4 text-center", children: [_jsx("p", { className: "text-sm text-gray-500", children: "Total Pump Time" }), _jsxs("p", { className: "text-2xl font-bold text-cyan-600", children: [Math.round(history.reduce((acc, h) => acc + h.pumpOnMinutes, 0)), " min"] })] }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm border p-4 text-center", children: [_jsx("p", { className: "text-sm text-gray-500", children: "Total Light Time" }), _jsxs("p", { className: "text-2xl font-bold text-yellow-600", children: [Math.round(history.reduce((acc, h) => acc + h.lightOnMinutes, 0) / 60), "h"] })] })] })) : (_jsx("div", { className: "col-span-4 text-center py-8 text-gray-500", children: "No historical data available yet" })) }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4", children: [_jsx("h3", { className: "text-sm font-medium text-gray-500 uppercase tracking-wide mb-4", children: "Temperature & Humidity Trends (24 Hours)" }), _jsx(SimpleChart, { data: chartData, title: "Temperature & Humidity" })] }), _jsxs("div", { className: "bg-white rounded-lg shadow-sm border border-gray-200 p-4", children: [_jsx("h3", { className: "text-sm font-medium text-gray-500 uppercase tracking-wide mb-4", children: "Hourly Data" }), _jsxs("div", { className: "overflow-x-auto", children: [_jsxs("table", { className: "min-w-full text-sm", children: [_jsx("thead", { children: _jsxs("tr", { className: "border-b", children: [_jsx("th", { className: "text-left py-2 px-2 font-medium text-gray-500", children: "Time" }), _jsx("th", { className: "text-center py-2 px-2 font-medium text-gray-500", children: "Temp (\u00B0F)" }), _jsx("th", { className: "text-center py-2 px-2 font-medium text-gray-500", children: "Humidity (%)" }), _jsx("th", { className: "text-center py-2 px-2 font-medium text-gray-500", children: "Soil (%)" }), _jsx("th", { className: "text-center py-2 px-2 font-medium text-gray-500", children: "Water (%)" }), _jsx("th", { className: "text-center py-2 px-2 font-medium text-gray-500", children: "Pump (min)" })] }) }), _jsx("tbody", { children: history.slice(-12).reverse().map((h, i) => (_jsxs("tr", { className: "border-b last:border-0", children: [_jsx("td", { className: "py-2 px-2", children: new Date(h.hour).toLocaleTimeString() }), _jsx("td", { className: "text-center py-2 px-2", children: Math.round(h.tempAvg) }), _jsx("td", { className: "text-center py-2 px-2", children: Math.round(h.humidityAvg) }), _jsx("td", { className: "text-center py-2 px-2", children: Math.round(h.soilMoistureAvg) }), _jsx("td", { className: "text-center py-2 px-2", children: Math.round(h.waterLevelAvg) }), _jsx("td", { className: "text-center py-2 px-2", children: h.pumpOnMinutes })] }, i))) })] }), history.length === 0 && (_jsx("p", { className: "text-center py-4 text-gray-500", children: "No data available yet" }))] })] })] })), activeTab === 'settings' && (_jsxs("div", { className: "grid grid-cols-1 md:grid-cols-2 gap-4", children: [_jsx(DeviceInfoCard, { state: state }), _jsx(CropConfigCard, { cropConfig: state.cropConfig, deviceId: deviceId })] }))] })] }));
}
